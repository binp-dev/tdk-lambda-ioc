ReplyTimeout = 2000;
Terminator = "\r";

setAddress {
    out "ADR \$1";
    in "OK";
}

getSerialNumber {
    @init {
        setAddress;
        out "SN?";
        in "%s";
    }
}

getVoltageAndCurrent {
    setAddress;
    out "DVC?";
    in 
    "%f,"                       # Actual (measured) voltage (put in PS$(UNIT_ADR):volt_real)
    "%*f,"                      # Programmed (set) voltage (skip)
    "%(PS\$1:curr_real)f,"      # Actual (measured) current> (put in PS$(UNIT_ADR):curr_real)
    "%*f,"                      # Programmed (set) current (skip)
    "%*f,"                      # Over voltage set point protectiont (skip)
    "%*f";                      # Under voltage set point protectiont (skip)
}

setVoltage {
    out "PV %f";
    @init {
        setAddress;
        out "PV?";
        in "%f";
    }
}

setCurrent {
    out "PC %f";
    @init {
        setAddress;
        out "PC?";
        in "%f";
    }
}

setOverVoltageProtection {
    out "OVP %f";
    @init {
        setAddress;
        out "OVP?";
        in "%f";
    }
}

setUnderVoltageLimit {
    out "UVL %f";
    @init {
        setAddress;
        out "UVL?";
        in "%f";
    }
}